[tool:pytest]
# Ultra-Fast Test Discovery Configuration
# Optimized for sub-100ms test discovery

# Aggressive caching
cache_dir = .pytest_cache
cache_update = true

# Minimal test paths - only scan specific directories
testpaths = 
    common/tests
    common/transformations/tests
    cereal/messaging/tests
    test_cache_demo

# Precise pattern matching
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Ultra-fast discovery options
addopts = 
    # Collection optimization
    --collect-only
    --quiet
    --no-header
    --tb=no
    --continue-on-collection-errors
    
    # Parallel collection
    -n auto
    --dist=no
    
    # Disable all unnecessary plugins
    -p no:anyio
    -p no:typeguard  
    -p no:langsmith
    -p no:faker
    -p no:doctest
    -p no:pastebin
    -p no:junitxml
    -p no:legacypath
    -p no:faulthandler
    -p no:warnings
    -p no:cacheprovider
    -p no:terminal
    -p no:capture
    -p no:resultlog
    -p no:skipping
    -p no:tmpdir
    -p no:monkeypatch
    
    # Speed optimizations
    --tb=no
    --no-cov
    --disable-warnings
    --maxfail=1
    
# Exclude directories for faster scanning
norecursedirs = 
    .git 
    .tox 
    dist 
    build 
    *.egg 
    .pytest_cache 
    .mypy_cache 
    __pycache__
    .venv
    node_modules
    .DS_Store

# Minimal version
minversion = 6.0

# Disable plugin autoloading
addopts = --disable-plugin-autoload

# Essential markers only
markers =
    fast: fast running tests
    discovery: test discovery optimization

# Suppress all warnings
filterwarnings =
    ignore
    
# Minimal logging
log_level = ERROR
